{"paragraphs":[{"text":"import org.apache.spark.sql.functions._\n\n//TODO: Update this directory to match where your JVMs Compare Benchmark Results in CSV format are located.\nval project_dir = \"/Users/cguntur/projects/jvms-compare\"\nval benchmark_dir = project_dir + \"/benchmark-results\"\nprintln(\"Using benchmark results from: \" + benchmark_dir)\n\n// Update this list if there are other or different JDKs being compared.\nval jdks = List(\"OracleJDK8\", \"GraalEE\", \"GraalCE\", \"AdoptOpenJDK8Hotspot\", \"AdoptOpenJDKOpenJ9\", \"OpenJDK11Hotspot\", \"OpenJDK11Graal\", \"GraalEEC2\")\n\n// This is an experimental run with 1k size. Alter value if a different size is used during the benchmark execution.\nval size = \"1 Thousand\"\n\nvar dummyData = spark.read.option(\"header\", \"true\").csv(project_dir + \"/\" + \"dummy.csv\")\nvar dataFrame = dummyData.toDF(\"Benchmark\", \"Mode\", \"Threads\", \"Samples\", \"Score\", \"Error\", \"Units\", \"JDK\", \"Size\")\n\nfor (i <- 1 to 8) {\n    var csvFile = benchmark_dir+\"/*/0\" + i + \"*.csv\"\n    var benchmarkData = spark.read.option(\"header\", \"true\").csv(csvFile)\n    var df = benchmarkData.toDF(\"Benchmark\", \"Mode\", \"Threads\", \"Samples\", \"Score\", \"Error\", \"Units\")\n\n    // Add a JDK column with values that are sequentially listed in the jdks val above. \n    // JDKs map to the prefixed number in the results.\n    // For instance, OracleJDK8 is the first run and its prefix for results is 01.\n    df = df.withColumn(\"JDK\", when($\"Mode\".isNull, \"\").otherwise(jdks(i - 1)))\n\n    // Add a Benchmark column that extracts its value from the CSV Benchmark column\n    df = df.withColumn(\"Benchmark\", substring($\"Benchmark\", 23, 200))\n    df = df.withColumn(\"Size\", when($\"Mode\".isNull, \"\").otherwise(size))\n\n    dataFrame = dataFrame.union(df)\n}\n\ndataFrame.createOrReplaceTempView(\"benchmarks1\")","user":"anonymous","dateUpdated":"2019-11-28T23:55:22-0500","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true,"tableHide":false,"editorHide":false},"settings":{"params":{"benchmark_dir":""},"forms":{}},"apps":[],"jobName":"paragraph_1574991056874_2008406167","id":"20191111-225606_73930282","dateCreated":"2019-11-28T20:30:56-0500","dateStarted":"2019-11-28T23:55:22-0500","dateFinished":"2019-11-28T23:55:28-0500","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4944"},{"text":"%sql \n\nselect count(*) from benchmarks1\n--where Benchmark like \"${BenchmarkClass=PersonFilterAndGroup}%\"\n--and Benchmark like \"%${BenchmarkType=ECEager_serial}%\"\n--and JDK=\"${JDK=OracleJDK8}\"","user":"anonymous","dateUpdated":"2019-11-28T23:56:52-0500","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"runOnSelectionChange":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{"columns":[{"name":"Benchmark","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"Mode","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"Threads","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"Samples","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"Score","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"Error","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"Units","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"JDK","visible":true,"width":"*","sort":{},"filters":[{"term":"Ora"}],"pinned":""},{"name":"Size","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""}],"scrollFocus":{},"selection":[],"grouping":{"grouping":[],"aggregations":[],"rowExpandedStates":{}},"treeView":{},"pagination":{"paginationCurrentPage":1,"paginationPageSize":250}},"tableColumnTypeState":{"names":{"count(1)":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":true,"showPagination":false,"showAggregationFooter":true},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default","stacked":false},"stackedAreaChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default","style":"stream"},"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{},"keys":[{"name":"Benchmark","index":0,"aggr":"sum"}],"groups":[{"name":"JDK","index":7,"aggr":"sum"}],"values":[{"name":"Score","index":4,"aggr":"sum"}]},"helium":{}}},"enabled":true,"tableHide":false,"editorHide":false},"settings":{"params":{"Benchmark":"IntListFilter.filterEC","BenchmarkClass":"PersonFilterAndGroup","BenchmarkType":"ECEager_serial","JDK":"OracleJDK8"},"forms":{"BenchmarkClass":{"type":"TextBox","name":"BenchmarkClass","defaultValue":"PersonFilterAndGroup","hidden":false,"$$hashKey":"object:4992"},"BenchmarkType":{"type":"TextBox","name":"BenchmarkType","defaultValue":"ECEager_serial","hidden":false,"$$hashKey":"object:4993"},"JDK":{"type":"TextBox","name":"JDK","defaultValue":"OracleJDK8","hidden":false,"$$hashKey":"object:4994"}}},"apps":[],"jobName":"paragraph_1574991056876_-543737712","id":"20191111-230359_705590019","dateCreated":"2019-11-28T20:30:56-0500","dateStarted":"2019-11-28T23:56:52-0500","dateFinished":"2019-11-28T23:56:52-0500","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4945"},{"user":"anonymous","dateUpdated":"2019-11-28T23:55:28-0500","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1574991056878_-2043967168","id":"20191111-231156_520741420","dateCreated":"2019-11-28T20:30:56-0500","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4946"}],"name":"Benchmarks/Experimental/CSV","id":"2EVDNA8FK","noteParams":{},"noteForms":{},"angularObjects":{"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}
